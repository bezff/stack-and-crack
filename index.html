<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0A0A0F">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Stack & Crack - –•–∞–∫–µ—Ä—Å–∫–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞">
    
    <title>Stack & Crack</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="assets/icon-192.png">
    <link rel="apple-touch-icon" href="assets/icon-192.png">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="splash-screen">
        <div class="splash-content">
            <img src="assets/logo.svg" alt="Swipe Studio" class="studio-logo">
            <div class="studio-name">SWIPE STUDIO</div>
            <div class="splash-loader">
                <div class="splash-loader-bar"></div>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä—ã -->
    <div id="game-container" class="hidden">
        <!-- Canvas –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —á–∞—Å—Ç–∏—Ü -->
        <canvas id="effects-canvas"></canvas>
        
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <header id="top-panel">
            <div class="score-container">
                <span class="label">SCORE</span>
                <span id="score">0</span>
            </div>
            <div id="multiplier-container" class="hidden">
                <span id="multiplier">x2</span>
            </div>
            <div class="level-info" style="display: none;">
                <span class="label">LVL</span>
                <span id="level-display">1</span>
                <div class="level-progress">
                    <div class="level-progress-bar" id="level-progress-bar"></div>
                </div>
            </div>
            <div class="timer-info hidden" id="timer-container">
                <span class="label">TIME</span>
                <span id="game-timer">60</span>
            </div>
            <div class="target-info hidden" id="target-container">
                <span class="label">TARGET</span>
                <span id="target-score">1000</span>
            </div>
            <!-- AI –ø–∞–Ω–µ–ª—å –¥–ª—è Versus —Ä–µ–∂–∏–º–∞ -->
            <div class="ai-panel hidden" id="ai-panel">
                <div class="ai-avatar" id="ai-avatar">ü§ñ</div>
                <div class="ai-info">
                    <span class="ai-label">AI</span>
                    <span class="ai-score" id="ai-score">0</span>
                </div>
                <span class="ai-status" id="ai-status">ü§î –î—É–º–∞–µ—Ç...</span>
            </div>
<button id="pause-btn" aria-label="–ü–∞—É–∑–∞">‚è∏</button>
        </header>

        <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
        <main id="game-field">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
            <div class="column" id="column-left">
                <div class="blocks-container" id="blocks-left"></div>
                <div class="sum-display">
                    <span class="sum-label">SUM:</span>
                    <span class="sum-value" id="sum-left">0</span>
                </div>
                <div class="wall" id="wall-left">
                    <span class="wall-value">7</span>
                    <div class="wall-cracks"></div>
                </div>
                <div class="overheat-timer hidden" id="timer-left">3</div>
            </div>

            <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å -->
            <div class="divider"></div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
            <div class="column" id="column-right">
                <div class="blocks-container" id="blocks-right"></div>
                <div class="sum-display">
                    <span class="sum-label">SUM:</span>
                    <span class="sum-value" id="sum-right">0</span>
                </div>
                <div class="wall" id="wall-right">
                    <span class="wall-value">5</span>
                    <div class="wall-cracks"></div>
                </div>
                <div class="overheat-timer hidden" id="timer-right">3</div>
            </div>
        </main>

        <!-- –ü–∞–¥–∞—é—â–∏–π –±–ª–æ–∫ -->
        <div id="falling-block" class="block hidden">
            <span class="block-value">5</span>
        </div>

        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <footer id="controls">
            <button class="control-btn" id="btn-left" aria-label="–õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞">
                <span class="arrow">‚Üê</span>
            </button>
            <div class="next-block-container">
                <span class="next-label">NEXT</span>
                <div class="block-queue">
                    <div class="next-block" id="next-block">
                        <span class="block-value">3</span>
                    </div>
                    <div class="preview-block" id="preview-block-1">
                        <span class="block-value">?</span>
                    </div>
                    <div class="preview-block" id="preview-block-2">
                        <span class="block-value">?</span>
                    </div>
                </div>
            </div>
            <button class="control-btn" id="btn-right" aria-label="–ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞">
                <span class="arrow">‚Üí</span>
            </button>
        </footer>
        
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–æ–º–±–æ -->
        <div id="combo-indicator" class="hidden">
            <span class="combo-count">x0</span>
            <span class="combo-label">COMBO</span>
        </div>
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è floating text -->
        <div id="floating-text-container"></div>

        <!-- –í—Å–ø—ã—à–∫–∞ —ç–∫—Ä–∞–Ω–∞ -->
        <div id="screen-flash"></div>
        
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–≤–æ–π–Ω–æ–º –≤–∑–ª–æ–º–µ -->
        <div id="dual-hack-notification" class="hidden">
            <span class="dual-text">DUAL HACK!</span>
            <span class="dual-multiplier">x2</span>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–∞—É–∑—ã -->
    <div id="pause-screen" class="overlay hidden">
        <button class="overlay-settings-btn" id="pause-settings-btn" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öô</button>
        <div class="overlay-content">
            <h2>–ü–ê–£–ó–ê</h2>
            <button class="menu-btn" id="resume-btn">–ü–†–û–î–û–õ–ñ–ò–¢–¨</button>
            <button class="menu-btn" id="restart-btn">–ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û</button>
            <button class="menu-btn secondary-btn" id="main-menu-btn">–ù–ê –ì–õ–ê–í–ù–£–Æ</button>
            <div class="high-score">
                <span>–†–ï–ö–û–†–î:</span>
                <span id="high-score">0</span>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öô –ù–ê–°–¢–†–û–ô–ö–ò</h2>
                <button class="modal-close" id="settings-close-btn">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="settings-group">
                    <h3>–£–ü–†–ê–í–õ–ï–ù–ò–ï</h3>
                    <label class="toggle-setting">
                        <span>–°–≤–∞–π–ø—ã</span>
                        <input type="checkbox" id="swipe-toggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-group">
                    <h3>–≠–§–§–ï–ö–¢–´</h3>
                    <label class="toggle-setting">
                        <span>–í–∏–±—Ä–∞—Ü–∏—è</span>
                        <input type="checkbox" id="haptic-toggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <label class="toggle-setting">
                        <span>–ó–≤—É–∫</span>
                        <input type="checkbox" id="sound-toggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <label class="toggle-setting">
                        <span>–ú—É–∑—ã–∫–∞</span>
                        <input type="checkbox" id="music-toggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-group">
                    <h3>–£–í–ï–î–û–ú–õ–ï–ù–ò–Ø</h3>
                    <label class="toggle-setting">
                        <span>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</span>
                        <input type="checkbox" id="notifications-toggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-group">
                    <h3>–î–û–°–¢–£–ü–ù–û–°–¢–¨</h3>
                    <label class="toggle-setting">
                        <span>–†–µ–∂–∏–º –¥–ª—è –¥–∞–ª—å—Ç–æ–Ω–∏–∫–æ–≤</span>
                        <input type="checkbox" id="colorblind-toggle">
                        <span class="toggle-slider"></span>
                    </label>
                    <label class="toggle-setting">
                        <span>–ö—Ä—É–ø–Ω—ã–µ –∫–Ω–æ–ø–∫–∏</span>
                        <input type="checkbox" id="large-controls-toggle">
                        <span class="toggle-slider"></span>
                    </label>
                    <label class="toggle-setting">
                        <span>–ë–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–π</span>
                        <input type="checkbox" id="reduced-motion-toggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="menu-btn" id="settings-save-btn">–ì–û–¢–û–í–û</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∞–≥–∞–∑–∏–Ω–∞ -->
    <div id="shop-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content shop-content">
            <div class="modal-header">
                <h2>üé® –¢–ï–ú–´</h2>
                <button class="modal-close" id="shop-close-btn">‚úï</button>
            </div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ -->
            <div class="shop-profile">
                <div class="profile-level">
                    <span class="profile-label">–£–†–û–í–ï–ù–¨</span>
                    <span class="profile-value" id="shop-level">1</span>
                </div>
                <div class="profile-cracks">
                    <span class="profile-label">–í–ó–õ–û–ú–û–í</span>
                    <span class="profile-value" id="shop-total-cracks">0</span>
                </div>
            </div>
            
            <!-- –°–µ—Ç–∫–∞ —Ç–µ–º -->
            <div class="themes-grid">
                <div class="theme-card unlocked active" data-theme="neon-city">
                    <div class="theme-preview neon-city-preview"></div>
                    <div class="theme-info">
                        <span class="theme-name">NEON CITY</span>
                        <span class="theme-status">‚úì –ê–∫—Ç–∏–≤–Ω–∞</span>
                    </div>
                </div>
                <div class="theme-card locked" data-theme="matrix">
                    <div class="theme-preview matrix-preview"></div>
                    <div class="theme-info">
                        <span class="theme-name">MATRIX</span>
                        <span class="theme-unlock">üîí 100 –≤–∑–ª–æ–º–æ–≤</span>
                    </div>
                </div>
                <div class="theme-card locked" data-theme="synthwave">
                    <div class="theme-preview synthwave-preview"></div>
                    <div class="theme-info">
                        <span class="theme-name">SYNTHWAVE</span>
                        <span class="theme-unlock">üîí –£—Ä–æ–≤–µ–Ω—å 5</span>
                    </div>
                </div>
                <div class="theme-card locked" data-theme="minimal">
                    <div class="theme-preview minimal-preview"></div>
                    <div class="theme-info">
                        <span class="theme-name">MINIMAL</span>
                        <span class="theme-unlock">üîí 10 DUAL HACK</span>
                    </div>
                </div>
                <div class="theme-card locked" data-theme="terminal">
                    <div class="theme-preview terminal-preview"></div>
                    <div class="theme-info">
                        <span class="theme-name">TERMINAL</span>
                        <span class="theme-unlock">üîí –£—Ä–æ–≤–µ–Ω—å 10</span>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="menu-btn" id="shop-close-footer-btn">–ó–ê–ö–†–´–¢–¨</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
    <div id="achievements-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content achievements-content">
            <div class="modal-header">
                <h2>üèÜ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø</h2>
                <button class="modal-close" id="achievements-close-btn">‚úï</button>
            </div>
            
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="achievements-stats">
                <div class="stat-item">
                    <span class="stat-value" id="achievements-unlocked">0</span>
                    <span class="stat-label">–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="achievements-total">10</span>
                    <span class="stat-label">–í—Å–µ–≥–æ</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="player-level-display">1</span>
                    <span class="stat-label">–£—Ä–æ–≤–µ–Ω—å</span>
                </div>
            </div>
            
            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è -->
            <div class="level-progress-container">
                <div class="level-progress-info">
                    <span>–î–æ —É—Ä–æ–≤–Ω—è <span id="next-level">2</span></span>
                    <span id="cracks-to-next">10 –≤–∑–ª–æ–º–æ–≤</span>
                </div>
                <div class="level-progress-bar-container">
                    <div class="level-progress-bar-fill" id="level-progress-fill"></div>
                </div>
            </div>
            
            <!-- –°–µ—Ç–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
            <div class="achievements-grid" id="achievements-grid">
                <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
            
            <div class="modal-footer">
                <button class="menu-btn" id="achievements-close-footer-btn">–ó–ê–ö–†–´–¢–¨</button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã -->
    <div id="game-over-screen" class="overlay hidden">
        <div class="overlay-content">
            <h2 class="game-over-title">GAME OVER</h2>
            <div id="versus-result" class="versus-result hidden"></div>
            <div class="final-score">
                <span>–°–ß–Å–¢:</span>
                <span id="final-score">0</span>
            </div>
            <div id="versus-score-container" class="versus-score-container hidden">
                <span>AI:</span>
                <span id="versus-ai-score">0</span>
            </div>
            <div class="high-score">
                <span>–†–ï–ö–û–†–î:</span>
                <span id="final-high-score">0</span>
            </div>
            <span id="new-record" class="hidden">–ù–û–í–´–ô –†–ï–ö–û–†–î!</span>
            <button class="menu-btn" id="play-again-btn">–ò–ì–†–ê–¢–¨ –°–ù–û–í–ê</button>
            <button class="menu-btn share-btn" id="share-btn">üì§ –ü–û–î–ï–õ–ò–¢–¨–°–Ø</button>
        </div>
    </div>

    <!-- –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="start-screen" class="overlay">
        <div class="overlay-buttons-left">
            <button class="overlay-btn-icon" id="start-settings-btn" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öô</button>
            <button class="overlay-btn-icon" id="start-shop-btn" aria-label="–ú–∞–≥–∞–∑–∏–Ω">üõí</button>
            <button class="overlay-btn-icon" id="start-achievements-btn" aria-label="–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è">üèÜ</button>
        </div>
        <div class="overlay-content">
            <h1 class="game-title">
                <span class="title-stack">STACK</span>
                <span class="title-amp">&</span>
                <span class="title-crack">CRACK</span>
            </h1>
            <p class="game-subtitle">–•–∞–∫–µ—Ä—Å–∫–∞—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞</p>
            <button class="menu-btn start-btn" id="start-btn">–ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
            <div class="instructions">
                <p>–°–æ–±–∏—Ä–∞–π —Å—É–º–º—É —Ü–∏—Ñ—Ä –¥–ª—è –≤–∑–ª–æ–º–∞ —Å—Ç–µ–Ω</p>
                <p>‚Üê –¢–∞–ø/–°–≤–∞–π–ø –≤–ª–µ–≤–æ | –¢–∞–ø/–°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ ‚Üí</p>
            </div>
            <div class="high-score">
                <span>–†–ï–ö–û–†–î:</span>
                <span id="start-high-score">0</span>
            </div>
            <div class="version-info" id="version-display">v1.1.0</div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ -->
    <div id="mode-screen" class="overlay hidden">
        <div class="overlay-content mode-content">
            <h2>–í–´–ë–ï–†–ò –†–ï–ñ–ò–ú</h2>
            <div class="mode-options">
                <button class="mode-btn" data-mode="classic">
                    <span class="mode-icon">üéÆ</span>
                    <span class="mode-name">–ö–õ–ê–°–°–ò–ö–ê</span>
                    <span class="mode-desc">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º</span>
                </button>
                <button class="mode-btn" data-mode="timeAttack">
                    <span class="mode-icon">‚è±Ô∏è</span>
                    <span class="mode-name">–ù–ê –í–†–ï–ú–Ø</span>
                    <span class="mode-desc">60 —Å–µ–∫—É–Ω–¥ –Ω–∞ –º–∞–∫—Å–∏–º—É–º</span>
                </button>
                <button class="mode-btn" data-mode="zen">
                    <span class="mode-icon">üßò</span>
                    <span class="mode-name">–î–ó–ï–ù</span>
                    <span class="mode-desc">–ë–µ–∑ –ø–µ—Ä–µ–≥—Ä–µ–≤–∞</span>
                </button>
                <button class="mode-btn challenge" data-mode="challenge">
                    <span class="mode-icon">üéØ</span>
                    <span class="mode-name">–ò–°–ü–´–¢–ê–ù–ò–ï</span>
                    <span class="mode-desc" id="challenge-desc">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≤—ã–∑–æ–≤</span>
                </button>
                <button class="mode-btn versus" data-mode="versus">
                    <span class="mode-icon">ü§ñ</span>
                    <span class="mode-name">–ü–†–û–¢–ò–í –ò–ò</span>
                    <span class="mode-desc">–ü–æ–±–µ–¥–∏ –±–æ—Ç–∞!</span>
                </button>
            </div>
            <button class="menu-btn secondary-btn" id="mode-back-btn">–ù–ê–ó–ê–î</button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ -->
    <div id="difficulty-screen" class="overlay hidden">
        <div class="overlay-content difficulty-content">
            <h2>–í–´–ë–ï–†–ò –°–õ–û–ñ–ù–û–°–¢–¨</h2>
            <div class="difficulty-options">
                <button class="difficulty-btn" data-difficulty="easy">
                    <span class="diff-name">üü¢ –õ–Å–ì–ö–ò–ô</span>
                    <span class="diff-desc">–î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤</span>
                </button>
                <button class="difficulty-btn" data-difficulty="normal">
                    <span class="diff-name">üü° –ù–û–†–ú–ê–õ–¨–ù–´–ô</span>
                    <span class="diff-desc">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º</span>
                </button>
                <button class="difficulty-btn" data-difficulty="hard">
                    <span class="diff-name">üî¥ –°–õ–û–ñ–ù–´–ô</span>
                    <span class="diff-desc">–î–ª—è –ø—Ä–æ—Ñ–∏</span>
                </button>
                <button class="difficulty-btn endless" data-difficulty="endless">
                    <span class="diff-name">‚ôæÔ∏è –ë–ï–°–ö–û–ù–ï–ß–ù–´–ô</span>
                    <span class="diff-desc">–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—Ç—ë—Ç!</span>
                </button>
            </div>
            <button class="menu-btn secondary-btn" id="difficulty-back-btn">–ù–ê–ó–ê–î</button>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ -->
    <div id="update-notification" class="update-banner hidden">
        <div class="update-content">
            <span class="update-icon">üîÑ</span>
            <span class="update-text">–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è!</span>
        </div>
        <button class="update-btn" id="update-btn">–û–ë–ù–û–í–ò–¢–¨</button>
        <button class="update-close" id="update-close">‚úï</button>
    </div>

    <script src="version.js"></script>
    <script src="effects.js"></script>
    <script src="game.js"></script>
</body>
</html>
